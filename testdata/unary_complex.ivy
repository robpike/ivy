# Copyright 2014 The Go Authors. All rights reserved.
# Use of this source code is governed by a BSD-style
# license that can be found in the LICENSE file.

# Unary operations on complex numbers.

# Test the lexer.
0j0
	0j0

1j2
	1j2

-1j2
	-1j2

-1j-2
	-1j-2

-1j+2
	-1j2

# Make sure we get single tokens for these.
rho 1j1 -1j1 1j-1 +1j1 -1j-1 1j-1
	6

# Ditto
1j-1/2
	1j-1/2

0x32j077
	50j63

# Rational complex.
23/41j2/41+1
	64/41j2/41

j 1
	0j1

j 2j3
	-3j2

j 0j1
	-1j0

+ 1j2
	1j2

- 1j2
	-1j-2

/ 1j0
	1j0

/ 0j1
	0j-1

/ 1j2
	1/5j-2/5

sgn -2j0
	-1

sgn 0j0
	0

sgn 3j0
	1

sgn -3j4
	-3/5j4/5

sgn 2j-3
	0.554700196225j-0.832050294338

1 == abs sgn 2j-3
	1

1 == abs sgn -5j-8
	1

not 0j0
	1

not 1j0
	0

not 0j1
	0

not 1j1
	0

abs 0j1
	1

abs 1j0
	1

abs 3j4
	5

# Test cases for floor from E. E. McDonnell's paper (Table I)

floor 0.3j0.6
	0

floor 0.6j0.8
	0j1

floor 0.8j0.6
	1

floor 0.6j0.3
	0

# This one is peculiar, but happens because of the bias on the diagonal.
# Note: This result agrees with J and the paper but differs with Dyalog,
# which gets 2j3 apparently because of a > rather than >= in the calculation.
floor 2.9j2.9
	3j2

floor 0.9j0.9
	1

# Test cases for ceil from E. E. McDonnell's paper (Table II)

ceil 0.1j0.3
	0j1

ceil 0.7j0.8
	1j1

ceil -0.1j-0.3
	0

ceil 0.1j0.7
	0j1

ceil 0.1j0.7
	0j1

ceil -0.1j0.7
	0j1

ceil -0.5j0.5
	-1j1

ceil -0.5j-0.5
	-1

ceil 0.7j0.1
	1

real 3j4
	3

imag 3j4
	4

# Phase in -π to π.

phase 1 0 -1 # check the reals while we're here
	0 0 3.14159265359

phase 0j0 0j1 0j-1 1j0 -1j0
	0 1.57079632679 -1.57079632679 0 3.14159265359

phase 1j1 -1j1 -1j-1 1j-1
	0.785398163397 2.35619449019 -2.35619449019 -0.785398163397

rho rho 3j4
	0

# Conjugate

conj 1
	1

conj 1/3
	1/3

conj sqrt 2
	1.41421356237

conj 1j0
	1

conj 1j1
	1j-1

conj conj 1j1
	1j1

)format "%.16g"
sqrt 2j1
	1.455346690225355j0.3435607497225125

sqrt -1
	0j1

sqrt 3j4
	2j1

sqrt 3j-4
	2j-1

9 1 rho ** 0j-1 0j0 0j1 1j-1 1j0 1j1 -1j-1 -1j0 -1j1
	0.540302305868j-0.841470984808
	1
	0.540302305868j0.841470984808
	1.46869393992j-2.28735528718
	2.71828182846
	1.46869393992j2.28735528718
	0.198766110346j-0.309559875653
	0.367879441171
	0.198766110346j0.309559875653

8 1 rho log 0j-1 0j1 1j-1 1j0 1j1 -1j-1 -1j0 -1j1   # no log 0j0
	0j-1.57079632679
	0j1.57079632679
	0.34657359028j-0.785398163397
	0
	0.34657359028j0.785398163397
	0.34657359028j-2.35619449019
	0j3.14159265359
	0.34657359028j2.35619449019

# Check negative real logs work
log -1
	0j3.14159265359

9 1 rho sin 0j-1 0j0 0j1 1j-1 1j0 1j1 -1j-1 -1j0 -1j1
	0j-1.17520119364
	0
	0j1.17520119364
	1.29845758142j-0.634963914785
	0.841470984808
	1.29845758142j0.634963914785
	-1.29845758142j-0.634963914785
	-0.841470984808
	-1.29845758142j0.634963914785

9 1 rho cos 0j-1 0j0 0j1 1j-1 1j0 1j1 -1j-1 -1j0 -1j1
	1.54308063482
	1
	1.54308063482
	0.833730025131j0.988897705763
	0.540302305868
	0.833730025131j-0.988897705763
	0.833730025131j-0.988897705763
	0.540302305868
	0.833730025131j0.988897705763

9 1 rho tan 0j-1 0j0 0j1 1j-1 1j0 1j1 -1j-1 -1j0 -1j1
	0j-0.761594155956
	0
	0j0.761594155956
	0.27175258532j-1.08392332734
	1.55740772465
	0.27175258532j1.08392332734
	-0.27175258532j-1.08392332734
	-1.55740772465
	-0.27175258532j1.08392332734

9 1 rho sinh 0j-1 0j0 0j1 1j-1 1j0 1j1 -1j-1 -1j0 -1j1
	0j-0.841470984808
	0
	0j0.841470984808
	0.634963914785j-1.29845758142
	1.17520119364
	0.634963914785j1.29845758142
	-0.634963914785j-1.29845758142
	-1.17520119364
	-0.634963914785j1.29845758142

9 1 rho cosh 0j-1 0j0 0j1 1j-1 1j0 1j1 -1j-1 -1j0 -1j1
	0.540302305868
	1
	0.540302305868
	0.833730025131j-0.988897705763
	1.54308063482
	0.833730025131j0.988897705763
	0.833730025131j0.988897705763
	1.54308063482
	0.833730025131j-0.988897705763

9 1 rho tanh 0j-1 0j0 0j1 1j-1 1j0 1j1 -1j-1 -1j0 -1j1
	0j-1.55740772465
	0
	0j1.55740772465
	1.08392332734j-0.27175258532
	0.761594155956
	1.08392332734j0.27175258532
	-1.08392332734j-0.27175258532
	-0.761594155956
	-1.08392332734j0.27175258532

9 1 rho asin 0j-1 0j0 0j1 1j-1 1j0 1j1 -1j-1 -1j0 -1j1
	0j-0.88137358702
	0
	0j0.88137358702
	0.666239432493j-1.06127506191
	1.57079632679
	0.666239432493j1.06127506191
	-0.666239432493j-1.06127506191
	-1.57079632679
	-0.666239432493j1.06127506191

9 1 rho acos 0j-1 0j0 0j1 1j-1 1j0 1j1 -1j-1 -1j0 -1j1
	1.57079632679j0.88137358702
	1.57079632679
	1.57079632679j-0.88137358702
	0.904556894302j1.06127506191
	0
	0.904556894302j-1.06127506191
	2.23703575929j1.06127506191
	3.14159265359
	2.23703575929j-1.06127506191

7 1 rho atan 0j0 1j-1 1j0 1j1 -1j-1 -1j0 -1j1 # infinities for atan of 0j01 and 0j1
	0
	1.0172219679j-0.402359478109
	0.785398163397
	1.0172219679j0.402359478109
	-1.0172219679j-0.402359478109
	-0.785398163397
	-1.0172219679j0.402359478109

# asin and acos are ok when the argument is not in the real domain
# for those functions
acos 2
	0j1.31695789692

asin 2
	1.57079632679j-1.31695789692

float 7/2j5/2
	3.5j2.5

text 3j2
	3j2

9 1 rho asinh 0j-1 0j0 0j1 1j-1 1j0 1j1 -1j-1 -1j0 -1j1
	0j-1.57079632679
	0
	0j1.57079632679
	1.06127506191j-0.666239432493
	0.88137358702
	1.06127506191j0.666239432493
	-1.06127506191j-0.666239432493
	-0.88137358702
	-1.06127506191j0.666239432493

9 1 rho acosh 0j-1 0j0 0j1 1j-1 1j0 1j1 -1j-1 -1j0 -1j1
	-0.88137358702j1.57079632679
	0j1.57079632679
	0.88137358702j1.57079632679
	1.06127506191j-0.904556894302
	0
	1.06127506191j0.904556894302
	-1.06127506191j2.23703575929
	0j3.14159265359
	-1.06127506191j-2.23703575929

7 1 rho atanh 0j-1 0j0 0j1 1j-1 1j1 -1j-1 -1j1 # infinities for 1j0 and -1j0
	0j-0.785398163397
	0
	0j0.785398163397
	0.402359478109j-1.0172219679
	0.402359478109j1.0172219679
	-0.402359478109j-1.0172219679
	-0.402359478109j1.0172219679


# Fixed bug: don't use user-defined functions in core calculations.
op sqrt x = 99
op atan x = 99
abs 1j2  # Uses sqrt internally.
phase 1j1 # Uses atan internally
	2.2360679775
	0.785398163397

box 1j1
	1j1

first 1j1
	1j1
