# Copyright 2023 The Go Authors. All rights reserved.
# Use of this source code is governed by a BSD-style
# license that can be found in the LICENSE file.

# Test printing, particularly when the output is multiline.

# First, the easy stuff.

1
	1

float(1.01)
	1.01

1/3
	1/3

10000000000+1
	10000000001

sqrt 2
	1.41421356237

3j4
	3j4

iota 5
	1 2 3 4 5

3 4 rho iota 12
	 1  2  3  4
	 5  6  7  8
	 9 10 11 12

'a' 'b' 2 'c'
	a b 2 c

'abc'
	abc

# Vector with vector elements
1 (1 2) (1 2 3)
	1 (1 2) (1 2 3)

(1 2) (3 4) (5 6)
	(1 2) (3 4) (5 6)

1 'ab' (1 2 3)
	1 ab (1 2 3)

1 2 3 (10 11 12) 5 6 7
	1 2 3 (10 11 12) 5 6 7

# Vector with matrix elements. Various versions to test
# alignment and indenting

1 2 3 (3 3 rho iota 10) 5 6 7
	1 2 3 (1 2 3| 5 6 7
	      |4 5 6|
	      |7 8 9)

1 2 3 (3 3 rho iota 10) 5 6 (2 2 rho iota 10) 7
	1 2 3 (1 2 3| 5 6 (1 2| 7
	      |4 5 6|     |3 4)
	      |7 8 9)

1 2 3 5 6 (4 4 rho iota 10) 7 5 6 (4 4 rho iota 10) 7
	1 2 3 5 6 ( 1  2  3  4| 7 5 6 ( 1  2  3  4| 7
	          | 5  6  7  8|       | 5  6  7  8|
	          | 9 10  1  2|       | 9 10  1  2|
	          | 3  4  5  6)       | 3  4  5  6)

1 2 3 (2 2 rho iota 10) 5 6 (4 4 rho iota 10) 7 5 6 (4 4 rho iota 10) 7
	1 2 3 (1 2| 5 6 ( 1  2  3  4| 7 5 6 ( 1  2  3  4| 7
	      |3 4)     | 5  6  7  8|       | 5  6  7  8|
	                | 9 10  1  2|       | 9 10  1  2|
	                | 3  4  5  6)       | 3  4  5  6)

1 2 3 (2 2 rho iota 10) 5 6 (4 4 rho iota 10) 7 5 6 (4 4 rho iota 10) 7 8  (5 5 rho iota 10) 9
	1 2 3 (1 2| 5 6 ( 1  2  3  4| 7 5 6 ( 1  2  3  4| 7 8 ( 1  2  3  4  5| 9
	      |3 4)     | 5  6  7  8|       | 5  6  7  8|     | 6  7  8  9 10|
	                | 9 10  1  2|       | 9 10  1  2|     | 1  2  3  4  5|
	                | 3  4  5  6)       | 3  4  5  6)     | 6  7  8  9 10|
	                                                      | 1  2  3  4  5)

x=1 2 3; x[2]=3 4 5 rho iota 100; x
	1 ( 1  2  3  4  5| 3
	  | 6  7  8  9 10|
	  |11 12 13 14 15|
	  |16 17 18 19 20|

	  |21 22 23 24 25|
	  |26 27 28 29 30|
	  |31 32 33 34 35|
	  |36 37 38 39 40|

	  |41 42 43 44 45|
	  |46 47 48 49 50|
	  |51 52 53 54 55|
	  |56 57 58 59 60)


# Matrix with vector elements
3 4 rho (1 2) (3 4)
	(1 2) (3 4) (1 2) (3 4)
	(1 2) (3 4) (1 2) (3 4)
	(1 2) (3 4) (1 2) (3 4)

x = 3 4 rho iota 12; x[2;2] = 1 2 3; x
	1       2  3  4
	5 (1 2 3)  7  8
	9      10 11 12

x = 3 4 5 rho iota 60; x[2;2;2] = 1 2 3; x
	 1       2  3  4  5
	 6       7  8  9 10
	11      12 13 14 15
	16      17 18 19 20

	21      22 23 24 25
	26 (1 2 3) 28 29 30
	31      32 33 34 35
	36      37 38 39 40

	41      42 43 44 45
	46      47 48 49 50
	51      52 53 54 55
	56      57 58 59 60

x= 3 4 5 rho iota 100; x[2;2;2]=1 2 3; x
	 1       2  3  4  5
	 6       7  8  9 10
	11      12 13 14 15
	16      17 18 19 20

	21      22 23 24 25
	26 (1 2 3) 28 29 30
	31      32 33 34 35
	36      37 38 39 40

	41      42 43 44 45
	46      47 48 49 50
	51      52 53 54 55
	56      57 58 59 60

x= 3 4 5 rho iota 100; x[2;2;2]=3 4 rho iota 12; x
	 1             2  3  4  5
	 6             7  8  9 10
	11            12 13 14 15
	16            17 18 19 20

	21            22 23 24 25
	26 ( 1  2  3  4| 28 29 30
	   | 5  6  7  8|
	   | 9 10 11 12)
	31            32 33 34 35
	36            37 38 39 40

	41            42 43 44 45
	46            47 48 49 50
	51            52 53 54 55
	56            57 58 59 60

3 4 rho 1 (2 3 rho iota 6)
	1 (1 2 3| 1 (1 2 3|
	  |4 5 6)   |4 5 6)

	1 (1 2 3| 1 (1 2 3|
	  |4 5 6)   |4 5 6)

	1 (1 2 3| 1 (1 2 3|
	  |4 5 6)   |4 5 6)

3 4 rho (2 2 rho iota 4) (3 3 rho iota 9)
	(1 2| (1 2 3| (1 2| (1 2 3|
	|3 4) |4 5 6| |3 4) |4 5 6|
	      |7 8 9)       |7 8 9)

	(1 2| (1 2 3| (1 2| (1 2 3|
	|3 4) |4 5 6| |3 4) |4 5 6|
	      |7 8 9)       |7 8 9)

	(1 2| (1 2 3| (1 2| (1 2 3|
	|3 4) |4 5 6| |3 4) |4 5 6|
	      |7 8 9)       |7 8 9)

3 3 rho (2 2 rho 'ab') (3 3 rho 'cd')
	 (ab| (cdc|  (ab|
	 |ab) |dcd|  |ab)
	      |cdc)

	(cdc|  (ab| (cdc|
	|dcd|  |ab) |dcd|
	|cdc)       |cdc)

	 (ab| (cdc|  (ab|
	 |ab) |dcd|  |ab)
	      |cdc)

1 0 -1 o.flip 1 0 -1 @rot 3 3 rho 0
	(0 0 0| (0 0 0| (0 0 0|
	|0 0 0| |0 0 0| |0 0 0|
	|0 0 0) |0 0 0) |0 0 0)

	(0 0 0| (0 0 0| (0 0 0|
	|0 0 0| |0 0 0| |0 0 0|
	|0 0 0) |0 0 0) |0 0 0)

	(0 0 0| (0 0 0| (0 0 0|
	|0 0 0| |0 0 0| |0 0 0|
	|0 0 0) |0 0 0) |0 0 0)

# Deeply nested boxed matrix. Issue 214.

2 2 rho iota 4
	1 2
	3 4

2 2 rho  box 2 2 rho iota 4
	(1 2| (1 2|
	|3 4) |3 4)

	(1 2| (1 2|
	|3 4) |3 4)

2 2 rho box 2 2 rho  box 2 2 rho iota 4
	((1 2| (1 2|| ((1 2| (1 2||
	||3 4) |3 4)| ||3 4) |3 4)|

	|(1 2| (1 2|| |(1 2| (1 2||
	||3 4) |3 4)) ||3 4) |3 4))

	((1 2| (1 2|| ((1 2| (1 2||
	||3 4) |3 4)| ||3 4) |3 4)|

	|(1 2| (1 2|| |(1 2| (1 2||
	||3 4) |3 4)) ||3 4) |3 4))

2 2 rho box 2 2 rho box 2 2 rho  box 2 2 rho iota 4
	(((1 2| (1 2|| ((1 2| (1 2||| (((1 2| (1 2|| ((1 2| (1 2|||
	|||3 4) |3 4)| ||3 4) |3 4)|| |||3 4) |3 4)| ||3 4) |3 4)||
	|                           | |                           |
	||(1 2| (1 2|| |(1 2| (1 2||| ||(1 2| (1 2|| |(1 2| (1 2|||
	|||3 4) |3 4)) ||3 4) |3 4))| |||3 4) |3 4)) ||3 4) |3 4))|

	|((1 2| (1 2|| ((1 2| (1 2||| |((1 2| (1 2|| ((1 2| (1 2|||
	|||3 4) |3 4)| ||3 4) |3 4)|| |||3 4) |3 4)| ||3 4) |3 4)||
	|                           | |                           |
	||(1 2| (1 2|| |(1 2| (1 2||| ||(1 2| (1 2|| |(1 2| (1 2|||
	|||3 4) |3 4)) ||3 4) |3 4))) |||3 4) |3 4)) ||3 4) |3 4)))

	(((1 2| (1 2|| ((1 2| (1 2||| (((1 2| (1 2|| ((1 2| (1 2|||
	|||3 4) |3 4)| ||3 4) |3 4)|| |||3 4) |3 4)| ||3 4) |3 4)||
	|                           | |                           |
	||(1 2| (1 2|| |(1 2| (1 2||| ||(1 2| (1 2|| |(1 2| (1 2|||
	|||3 4) |3 4)) ||3 4) |3 4))| |||3 4) |3 4)) ||3 4) |3 4))|

	|((1 2| (1 2|| ((1 2| (1 2||| |((1 2| (1 2|| ((1 2| (1 2|||
	|||3 4) |3 4)| ||3 4) |3 4)|| |||3 4) |3 4)| ||3 4) |3 4)||
	|                           | |                           |
	||(1 2| (1 2|| |(1 2| (1 2||| ||(1 2| (1 2|| |(1 2| (1 2|||
	|||3 4) |3 4)) ||3 4) |3 4))) |||3 4) |3 4)) ||3 4) |3 4)))

# Issue 235: Panic in print due to failed invariant in widths.
2 2 rho "xy" (2 2 rho iota 4)
	xy (1 2|
	   |3 4)

	xy (1 2|
	   |3 4)

op x reduce y = (+/x*x) <= (+/y*y): 2 2 rho x, y; y reduce x - (floor 0.5+(+/x*y)/(+/y*y))*y
op reduce (x y) = (+/x*x) < (+/y*y): y reduce x; x reduce y
(mix z) 'reduces to' (reduce z = (10 20) (1 3))
	(10 20| reduces to ( 1  3|
	| 1  3)            | 3 -1)
